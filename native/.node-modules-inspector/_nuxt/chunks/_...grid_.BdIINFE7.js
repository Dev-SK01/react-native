import{_ as G}from"./nuxt-link.DFMQ8r5M.js";import{_ as P}from"./ClusterBadge.vue.D-ddemH5.js";import{_ as E,a as N,p as i,b as U,s as C}from"./FileSizeBadge.vue.9X-6oYv4.js";import{_ as T,a as A,b as F}from"./SafeImage.vue.B574OZzG.js";import{_ as I}from"./SourceTypeBadge.vue.DYFMseh5.js";import{_ as L}from"./PackageBorder.vue.CnNthHrW.js";import{e as w,q as u,o,w as f,b as c,a as r,y as x,l as k,D as B,c as D,F as V,i as z,m as R,f as j,g as H,n as q,Q as J,j as M,R as Q,S as W,d as h,t as X}from"../entry.BBXTE6X0.js";const K={flex:"~ wrap gap-2 items-center","text-sm":""},O=w({__name:"Item",props:{pkg:{}},setup($){return(a,l)=>{const m=E,d=N,n=T,p=U,b=A,v=I,y=L;return o(),u(y,{pkg:a.pkg,as:"button",outer:"border rounded-lg",inner:"flex flex-col gap-2 justify-center h-full hover:bg-active p2 px3",onClick:l[0]||(l[0]=g=>C.value=a.pkg===k(C)?void 0:a.pkg)},{default:f(()=>{var g;return[c(m,{pkg:a.pkg,"text-left":""},null,8,["pkg"]),r("div",K,[c(d,{pkg:a.pkg},null,8,["pkg"]),k(i).avaliable.flatDependents(a.pkg).length?(o(),u(n,{key:0,number:k(i).avaliable.flatDependents(a.pkg).length,icon:"i-ph-arrow-elbow-down-right-duotone text-xs","rounded-full":"","text-sm":""},null,8,["number"])):x("",!0),k(i).avaliable.flatDependencies(a.pkg).length?(o(),u(n,{key:1,number:k(i).avaliable.flatDependencies(a.pkg).length,icon:"i-ph-lego-duotone text-xs","rounded-full":"","text-sm":""},null,8,["number"])):x("",!0),k(B).showInstallSizeBadge&&((g=a.pkg.resolved.installSize)!=null&&g.bytes)?(o(),u(p,{key:2,bytes:a.pkg.resolved.installSize.bytes,digits:0,"rounded-full":"","text-sm":""},null,8,["bytes"])):x("",!0),k(B).showPublishTimeBadge?(o(),u(b,{key:3,pkg:a.pkg,"rounded-full":"","text-sm":""},null,8,["pkg"])):x("",!0),c(v,{pkg:a.pkg},null,8,["pkg"])])]}),_:1},8,["pkg"])}}}),Y={grid:"~ cols-minmax-320px gap-2"},Z=w({__name:"Container",props:{packages:{}},setup($){return(a,l)=>{const m=O;return o(),D("div",Y,[(o(!0),D(V,null,z(a.packages,d=>(o(),u(m,{key:d.spec,pkg:d},null,8,["pkg"]))),128))])}}}),ee=["open"],te={"text-xl":"",flex:"~ wrap items-center gap-2","cursor-pointer":"","select-none":"","hover:bg-active":"",rounded:"",p1:""},se=w({__name:"Expand",props:R({packages:{}},{moduleValue:{type:Boolean,default:!0},moduleValueModifiers:{}}),emits:["update:moduleValue"],setup($){const a=j($,"moduleValue");return(l,m)=>{const d=Z;return o(),D("details",{flex:"~ col gap-2",open:a.value,onToggle:m[0]||(m[0]=n=>a.value=n.target.open)},[r("summary",te,[r("div",{"i-ph-caret-down":"",transition:"","duration-300":"",op50:"","ml--5":"","text-base":"",class:q(a.value?"":"rotate--90")},null,2),H(l.$slots,"title")]),a.value?(o(),u(d,{key:0,packages:l.packages,mb4:""},null,8,["packages"])):x("",!0)],40,ee)}}}),ae={flex:"~ col gap-2"},ne={flex:"~ gap-2 items-center wrap",mb4:""},oe={flex:"~ items-center gap-1"},le={key:3,op75:""},S=5,ge=w({__name:"[...grid]",setup($){const a=J().params,l=M(()=>a.grid[0]||"depth"),m=M(()=>{var d,n,p,b,v,y,g;if(l.value==="module-type"){const s=new Map;for(const e of i.filtered.packages){const t=e.resolved.module;s.has(t)||s.set(t,[]),(d=s.get(t))==null||d.push(e)}return[...s.entries()].sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>({name:e,module:e,packages:t,expanded:!1}))}else if(l.value==="clusters"){const s=new Map;for(const e of i.filtered.packages){const t=i.filtered.flatClusters(e);for(const _ of t)s.has(_)||s.set(_,[]),(n=s.get(_))==null||n.push(e)}return[...s.entries()].sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>({name:e,cluster:e,packages:t,expanded:!1}))}else if(l.value==="authors"){const s=new Map;for(const e of i.filtered.packages){const t=Q(e)||[];t.length||t.push({name:"<Unspecified>",url:void 0});for(const _ of t)s.has(_.name)||s.set(_.name,[]),(p=s.get(_.name))==null||p.push(e)}return[...s.entries()].sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>({name:e,author:e,packages:t,expanded:!1}))}else if(l.value==="licenses"){const s=new Map;for(const e of i.filtered.packages){const t=e.resolved.packageJson.license||"<Unspecified>";s.has(t)||s.set(t,[]),(b=s.get(t))==null||b.push(e)}return[...s.entries()].sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>({name:e,license:e,packages:t,expanded:!1}))}else if(l.value==="github"){const s=new Map;for(const e of i.filtered.packages){const t=((v=W(e))==null?void 0:v.org)||"<Unspecified>";s.has(t)||s.set(t,[]),(y=s.get(t))==null||y.push(e)}return[...s.entries()].sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>({name:e,org:e,packages:t,expanded:!1}))}else{const s=new Map;for(const e of i.filtered.packages){let t=e.depth;t>=S&&(t=S),s.has(t)||s.set(t,[]),(g=s.get(t))==null||g.push(e)}return[...s.entries()].sort(([e],[t])=>e-t).map(([e,t])=>({name:e===0?"Workspace Packages":`Depth ${e}`,packages:t,expanded:e<3}))}});return(d,n)=>{const p=G,b=P,v=N,y=T,g=se;return o(),D("div",ae,[r("div",ne,[n[6]||(n[6]=r("div",{op50:""}," Group by ",-1)),c(p,{"btn-action":"",as:"button",to:"/grid/depth","active-class":"text-primary bg-primary:5"},{default:f(()=>n[0]||(n[0]=[r("div",{"i-ph-stack-simple-duotone":""},null,-1),h(" Depth ")])),_:1}),c(p,{"btn-action":"",as:"button",to:"/grid/module-type","active-class":"text-primary bg-primary:5"},{default:f(()=>n[1]||(n[1]=[r("div",{"i-ph-file-code-duotone":""},null,-1),h(" Module Type ")])),_:1}),c(p,{"btn-action":"",as:"button",to:"/grid/clusters","active-class":"text-primary bg-primary:5"},{default:f(()=>n[2]||(n[2]=[r("div",{"i-ph-exclude-duotone":""},null,-1),h(" Clusters ")])),_:1}),c(p,{"btn-action":"",as:"button",to:"/grid/authors","active-class":"text-primary bg-primary:5"},{default:f(()=>n[3]||(n[3]=[r("div",{"i-ph-user-circle-duotone":""},null,-1),h(" Authors ")])),_:1}),c(p,{"btn-action":"",as:"button",to:"/grid/licenses","active-class":"text-primary bg-primary:5"},{default:f(()=>n[4]||(n[4]=[r("div",{"i-ph-file-text-duotone":""},null,-1),h(" License ")])),_:1}),c(p,{"btn-action":"",as:"button",to:"/grid/github","active-class":"text-primary bg-primary:5"},{default:f(()=>n[5]||(n[5]=[r("div",{"i-ph-users-duotone":""},null,-1),h(" GitHub Slug ")])),_:1})]),(o(!0),D(V,null,z(m.value,(s,e)=>(o(),u(g,{key:e,packages:s.packages,"module-value":s.expanded},{title:f(()=>[r("div",oe,[s.org?(o(),u(F,{key:0,src:`https://avatars.antfu.dev/gh/${s.org}`,"bg-active":"",border:"~ base rounded-full",w6:"",h6:"",crossorigin:"anonymous"},null,8,["src"])):x("",!0),s.cluster?(o(),u(b,{key:1,cluster:s.cluster},null,8,["cluster"])):s.module?(o(),u(v,{key:2,pkg:s.module},null,8,["pkg"])):(o(),D("span",le,X(s.name),1))]),c(y,{number:s.packages.length,"rounded-full":"",ml2:"","text-base":""},null,8,["number"])]),_:2},1032,["packages","module-value"]))),128))])}}});export{ge as default};
