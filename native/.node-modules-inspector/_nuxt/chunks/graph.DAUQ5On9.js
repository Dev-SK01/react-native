import{_ as i}from"./Canvas.vue.D7bVhWKP.js";import{e as h,j as u,k as f,q as m,o as _,l as g}from"../entry.BBXTE6X0.js";import{p as l}from"./FileSizeBadge.vue.9X-6oYv4.js";import"./PackageBorder.vue.CnNthHrW.js";const z=h({__name:"graph",setup(k){const o=l.filtered,d=u(()=>{var c;let a=(c=f.state.focus)!=null&&c.length?f.state.focus.map(o.get).filter(e=>!!e):o.packages.filter(e=>e.workspace);a.length||(a=o.packages.filter(e=>e.depth<=1));const s=new Set;function r(e){if(e&&!s.has(e)){s.add(e);for(const t of e.dependencies)r(o.get(t))}}for(const e of a)r(e);const n=new Set(o.packages.filter(e=>!s.has(e)).sort((e,t)=>e.depth-t.depth));let p=!0;for(;p;){p=!1;for(const e of n)o.dependents(e).some(t=>n.has(t))&&(n.delete(e),p=!0)}for(const e of n)a.push(e);return Array.from(a).sort((e,t)=>e.depth-t.depth||t.flatDependencies.size-e.flatDependencies.size)});return(a,s)=>{const r=i;return _(),m(r,{payload:g(l).filtered,"root-packages":d.value},null,8,["payload","root-packages"])}}});export{z as default};
